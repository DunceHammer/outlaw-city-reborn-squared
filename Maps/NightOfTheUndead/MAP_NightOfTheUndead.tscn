[gd_scene load_steps=21 format=3 uid="uid://bvd5fk8237gkp"]

[ext_resource type="PackedScene" uid="uid://dpfndro2upgsp" path="res://Maps/NightOfTheUndead/Assets/SM_NightOfTheUndead.glb" id="1_you0s"]
[ext_resource type="PackedScene" uid="uid://k4aky2wyyeb8" path="res://Prefabs/PlayerCharacter/PlayerCharacter.tscn" id="2_y35rs"]
[ext_resource type="PackedScene" uid="uid://btydl5mrobo3c" path="res://Prefabs/WeaponPickup/WeaponPickup.tscn" id="3_cg45j"]
[ext_resource type="PackedScene" uid="uid://b2p11yehqnout" path="res://Prefabs/WPN_StenGun/WPN_StenGun.tscn" id="4_ljuca"]
[ext_resource type="PackedScene" uid="uid://r3rfc255387w" path="res://Maps/NightOfTheUndead/Assets/SM_Pillar.glb" id="5_mimke"]
[ext_resource type="PackedScene" uid="uid://dfbscgm7itkjb" path="res://Maps/NightOfTheUndead/Assets/SM_StoneWall.glb" id="6_2431x"]
[ext_resource type="PackedScene" uid="uid://bwcdid55tsji1" path="res://Maps/NightOfTheUndead/Assets/SM_BlockyPillar.glb" id="7_xaqi2"]
[ext_resource type="PackedScene" uid="uid://ykj5wtgsgpqm" path="res://Scenes/UI_DevelopmentHud/UI_DevelopmentHud.tscn" id="8_2ptce"]
[ext_resource type="CompressedTexture3D" uid="uid://d34ub26m3bb5" path="res://Maps/NightOfTheUndead/Assets/TEX_FogMask.png" id="9_bnxql"]
[ext_resource type="CompressedTexture3D" uid="uid://4k1vtixdhp4c" path="res://Maps/NightOfTheUndead/Assets/TEX_FogMaskInverted.png" id="9_wcsqs"]
[ext_resource type="Script" path="res://Maps/NightOfTheUndead/Enemies.gd" id="11_h3ply"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_ykafg"]
sky_top_color = Color(0.0862745, 0.0980392, 0.172549, 1)
sky_horizon_color = Color(0.571569, 0.56676, 0.576387, 1)
ground_horizon_color = Color(0.571569, 0.56676, 0.576387, 1)

[sub_resource type="Sky" id="Sky_o8a2v"]
sky_material = SubResource("ProceduralSkyMaterial_ykafg")

[sub_resource type="Environment" id="Environment_6mr4l"]
background_mode = 2
sky = SubResource("Sky_o8a2v")
tonemap_mode = 2
glow_enabled = true
fog_enabled = true
fog_light_color = Color(0.101961, 0.117647, 0.137255, 1)
volumetric_fog_enabled = true
volumetric_fog_density = 0.0

[sub_resource type="BoxShape3D" id="BoxShape3D_niggk"]
size = Vector3(1, 1.00281, 1)

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_vhxg7"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_7v30h"]
albedo_color = Color(0.0745098, 0.172549, 0.0823529, 1)
metallic_specular = 0.0
roughness_texture = SubResource("NoiseTexture2D_vhxg7")
roughness_texture_channel = 1

[sub_resource type="BoxMesh" id="BoxMesh_l1ktu"]

[sub_resource type="FogMaterial" id="FogMaterial_663bv"]
density = 0.0335
albedo = Color(0.0627451, 0.533333, 0.321569, 1)
emission = Color(0.235294, 0.235294, 0.235294, 1)
height_falloff = 0.000183791
density_texture = ExtResource("9_bnxql")

[sub_resource type="FogMaterial" id="FogMaterial_rwgp7"]
density = 0.4561
albedo = Color(0, 0.384314, 0.270588, 1)
emission = Color(0.141176, 0.168627, 0.168627, 1)
height_falloff = 1e-05
edge_fade = 7.35164
density_texture = ExtResource("9_wcsqs")

[node name="MAP_NightOfTheUndead" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_6mr4l")

[node name="SM_NightOfTheUndead" parent="." instance=ExtResource("1_you0s")]
transform = Transform3D(-4.80825e-08, 0, 1.1, 0, 1.1, 0, -1.1, 0, -4.80825e-08, -0.437709, 0, 0.0868774)

[node name="PlayerCharacter" parent="." instance=ExtResource("2_y35rs")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0813923, -0.255912, -14.989)

[node name="WeaponPickup" parent="." instance=ExtResource("3_cg45j")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.851124, -0.255916, 2.53156)
weapon = ExtResource("4_ljuca")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.0843387, 0.996437, 0, -0.996437, 0.0843387, 0, 4.18123, 0)
light_energy = 0.05

[node name="Floor" type="StaticBody3D" parent="."]
transform = Transform3D(150, 0, 0, 0, 150, 0, 0, 0, 150, -12.9845, -75.7301, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Floor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.00140381, 0)
shape = SubResource("BoxShape3D_niggk")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Floor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00274917, -5.96046e-08, -0.000309932)
material_override = SubResource("StandardMaterial3D_7v30h")
mesh = SubResource("BoxMesh_l1ktu")

[node name="SM_Pillar" parent="." instance=ExtResource("5_mimke")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -33.0431, -0.283818, 8.38243)

[node name="SM_Pillar2" parent="." instance=ExtResource("5_mimke")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -47.3319, -0.283818, 8.38243)

[node name="SM_Pillar3" parent="." instance=ExtResource("5_mimke")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -33.0431, -0.283818, -6.03916)

[node name="SM_Pillar4" parent="." instance=ExtResource("5_mimke")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -47.3319, -0.283818, -6.03916)

[node name="SM_StoneWall" parent="." instance=ExtResource("6_2431x")]
transform = Transform3D(-1, 0, -1.50996e-07, 0, 0.866302, 0, 1.50996e-07, 0, -1, -32.9459, -0.175735, -20.9703)

[node name="SM_StoneWall2" parent="." instance=ExtResource("6_2431x")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 0.866302, 0, -1, 0, -4.37114e-08, -43.2757, -0.175735, -27.1232)

[node name="SM_StoneWall3" parent="." instance=ExtResource("6_2431x")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 0.866302, 0, -1, 0, -4.37114e-08, -28.2711, -0.175735, -25.5726)

[node name="SM_StoneWall4" parent="." instance=ExtResource("6_2431x")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 0.866302, 0, 1, 0, -4.37114e-08, -37.0935, -0.175735, -27.2113)

[node name="SM_BlockyPillar" parent="." instance=ExtResource("7_xaqi2")]
transform = Transform3D(2.11672, 0, 0, 0, 1, 0, 0, 0, 2.1674, -32.872, -0.284196, -26.3779)

[node name="OmniLight3D2" type="OmniLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.179703, 31.3157, 0)
omni_range = 51.1657

[node name="OmniLight3D3" type="OmniLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -39.1992, 31.3157, 0)
omni_range = 51.1657

[node name="OmniLight3D4" type="OmniLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -31.4925, 31.3765, -30.8267)
omni_range = 51.1657

[node name="UI_DevelopmentHud" parent="." node_paths=PackedStringArray("player_character") instance=ExtResource("8_2ptce")]
player_character = NodePath("../PlayerCharacter")

[node name="GeneralFog" type="FogVolume" parent="."]
transform = Transform3D(-4.37114e-08, 1, -4.37114e-08, 0, -4.37114e-08, -1, -1, -4.37114e-08, 1.91069e-15, -16.1728, -0.31871, -1.80531)
size = Vector3(95, 95, 39.18)
material = SubResource("FogMaterial_663bv")

[node name="OuterFog" type="FogVolume" parent="."]
transform = Transform3D(-4.37114e-08, 1, -4.37114e-08, 0, -4.37114e-08, -1, -1, -4.37114e-08, 1.91069e-15, -16.1728, -0.31871, -1.80531)
size = Vector3(190, 190, 46.88)
material = SubResource("FogMaterial_rwgp7")

[node name="Enemies" type="Node3D" parent="."]
script = ExtResource("11_h3ply")

[node name="EnemySpawnTimer" type="Timer" parent="."]
wait_time = 2.0

[node name="RoundCooldownTimer" type="Timer" parent="."]
wait_time = 3.0

[connection signal="child_exiting_tree" from="Enemies" to="Enemies" method="_on_child_exiting_tree"]
[connection signal="round_cooldown" from="Enemies" to="UI_DevelopmentHud" method="_on_enemies_round_cooldown"]
[connection signal="round_increased" from="Enemies" to="UI_DevelopmentHud" method="_on_enemies_round_increased"]
[connection signal="timeout" from="EnemySpawnTimer" to="Enemies" method="_on_enemy_spawn_timer_timeout"]
[connection signal="timeout" from="RoundCooldownTimer" to="Enemies" method="_on_round_cooldown_timer_timeout"]

